{"ast":null,"code":"import _regeneratorRuntime from\"H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Fragment,useState,useCallback}from\"react\";import{Download,XLg}from\"react-bootstrap-icons\";import FileIcon from\"./FileIcon\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SubFileItem=function SubFileItem(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var MySubFileDownload=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('https://sharingfileapp2022.azurewebsites.net/api/download/downloadsubfilesbymyself?userfileId='+props.fileId+'&subfileid='+props.id);case 3:response=_context.sent;if(!(response.status===400)){_context.next=8;break;}throw new Error('There is no file');case 8:if(response.ok){_context.next=10;break;}throw new Error('Something went wrong!!!');case 10:_context.next=12;return response.json();case 12:data=_context.sent;_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);setError(_context.t0.message);case 18:case\"end\":return _context.stop();}}},_callee,null,[[0,15]]);})),[props.fileId,props.id]);var Delete=function Delete(){setIsLoading(true);fetch(\"https://sharingfileapp2022.azurewebsites.net/api/userfiles/deletesubfiles?id=\"+props.id+\"&userFilesId=\"+props.fileId,{method:'Delete'}).then(function(res){if(res.ok){setIsLoading(false);props.onRemove(props.id);return res.json();}else{return res.json().then(function(data){var errorMessage='Delete failed';if(data&&data.error&&data.error.message){errorMessage=data.error.message;}throw new Error(errorMessage);});}}).catch(function(error){setIsLoading(false);});};return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6 pb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card rounded-3 h-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:props.fileName}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(FileIcon,{format:props.fileName})}),props.showDeleteButton&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:Delete,className:\"border border-1 btn btn-sm rounded-circle mx-1\",children:[isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})}),!isLoading&&/*#__PURE__*/_jsx(XLg,{className:\"text-danger mb-1\",size:15})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-sm shadow rounded-circle mx-1\",type:\"button\",onClick:MySubFileDownload,children:/*#__PURE__*/_jsx(Download,{className:\"mb-1\"})})]})})})});};export default SubFileItem;","map":{"version":3,"names":["React","Fragment","useState","useCallback","Download","XLg","FileIcon","SubFileItem","props","isLoading","setIsLoading","error","setError","MySubFileDownload","fetch","fileId","id","response","status","Error","ok","json","data","message","Delete","method","then","res","onRemove","errorMessage","catch","fileName","showDeleteButton"],"sources":["H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/src/Components/Dashboard/Files/SubFileItem.js"],"sourcesContent":["import React, { Fragment, useState, useCallback } from \"react\"\r\nimport { Download, XLg } from \"react-bootstrap-icons\";\r\nimport FileIcon from \"./FileIcon\";\r\n\r\n\r\n\r\nconst SubFileItem = (props) => {\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState();\r\n    \r\n    const MySubFileDownload = useCallback(async () => {\r\n        try {\r\n            const response = await fetch(\r\n                'https://sharingfileapp2022.azurewebsites.net/api/download/downloadsubfilesbymyself?userfileId=' + props.fileId + '&subfileid=' + props.id);\r\n\r\n            if (response.status === 400) {\r\n                throw new Error('There is no file');\r\n            }\r\n            else if (!response.ok) {\r\n                throw new Error('Something went wrong!!!');\r\n            }\r\n            const data = await response.json();\r\n        }\r\n        catch (error) {\r\n            setError(error.message);\r\n        }\r\n    }, [props.fileId, props.id]);\r\n\r\n   \r\n\r\n    const Delete = () => {\r\n        setIsLoading(true);\r\n        fetch(\"https://sharingfileapp2022.azurewebsites.net/api/userfiles/deletesubfiles?id=\" + props.id + \"&userFilesId=\" + props.fileId,\r\n            {\r\n                method: 'Delete'\r\n            }\r\n        ).then(res => {\r\n            if (res.ok) {\r\n                setIsLoading(false);\r\n                props.onRemove(props.id);\r\n                return res.json();\r\n            }\r\n            else {\r\n                return res.json().then((data) => {\r\n                    let errorMessage = 'Delete failed';\r\n                    if (data && data.error && data.error.message) {\r\n                        errorMessage = data.error.message;\r\n                    }\r\n                    throw new Error(errorMessage);\r\n                });\r\n            }\r\n        }).catch((error) => {\r\n            setIsLoading(false);\r\n        });\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n                <div className=\"col-lg-6 pb-3\">\r\n                    <div className=\"card rounded-3 h-100\">\r\n                        <div className=\"card-body\">\r\n                            <h5 className=\"card-title\">{props.fileName}</h5>\r\n                            <p>\r\n                                <FileIcon format={props.fileName} />\r\n                            </p>\r\n                            {props.showDeleteButton && <button type=\"button\" onClick={Delete} className=\"border border-1 btn btn-sm rounded-circle mx-1\">\r\n                                {isLoading && <div className=\"d-flex justify-content-center\">\r\n                                    <div className=\"spinner-border\" role=\"status\">\r\n                                        <span className=\"visually-hidden\">Loading...</span>\r\n                                    </div>\r\n                                </div>}\r\n                                {!isLoading && <XLg className=\"text-danger mb-1\" size={15} />}\r\n                            </button>\r\n                            }\r\n\r\n                            <button className=\"btn btn-primary btn-sm shadow rounded-circle mx-1\" type=\"button\" onClick={MySubFileDownload}>\r\n                                <Download className=\"mb-1\" />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n           \r\n        </Fragment>\r\n    )\r\n}\r\nexport default SubFileItem;"],"mappings":"obAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,QAA1B,CAAoCC,WAApC,KAAuD,OAAvD,CACA,OAASC,QAAT,CAAmBC,GAAnB,KAA8B,uBAA9B,CACA,MAAOC,SAAP,KAAqB,YAArB,C,wFAIA,GAAMC,YAAW,CAAG,QAAdA,YAAc,CAACC,KAAD,CAAW,CAC3B,cAAkCN,QAAQ,CAAC,KAAD,CAA1C,wCAAOO,SAAP,eAAkBC,YAAlB,eACA,eAA0BR,QAAQ,EAAlC,yCAAOS,KAAP,eAAcC,QAAd,eAEA,GAAMC,kBAAiB,CAAGV,WAAW,wEAAC,6LAEPW,MAAK,CACxB,iGAAmGN,KAAK,CAACO,MAAzG,CAAkH,aAAlH,CAAkIP,KAAK,CAACQ,EADhH,CAFE,QAExBC,QAFwB,oBAK1BA,QAAQ,CAACC,MAAT,GAAoB,GALM,+BAMpB,IAAIC,MAAJ,CAAU,kBAAV,CANoB,WAQpBF,QAAQ,CAACG,EARW,+BASpB,IAAID,MAAJ,CAAU,yBAAV,CAToB,gCAWXF,SAAQ,CAACI,IAAT,EAXW,SAWxBC,IAXwB,gGAc9BV,QAAQ,CAAC,YAAMW,OAAP,CAAR,CAd8B,qEAAD,GAgBlC,CAACf,KAAK,CAACO,MAAP,CAAeP,KAAK,CAACQ,EAArB,CAhBkC,CAArC,CAoBA,GAAMQ,OAAM,CAAG,QAATA,OAAS,EAAM,CACjBd,YAAY,CAAC,IAAD,CAAZ,CACAI,KAAK,CAAC,gFAAkFN,KAAK,CAACQ,EAAxF,CAA6F,eAA7F,CAA+GR,KAAK,CAACO,MAAtH,CACD,CACIU,MAAM,CAAE,QADZ,CADC,CAAL,CAIEC,IAJF,CAIO,SAAAC,GAAG,CAAI,CACV,GAAIA,GAAG,CAACP,EAAR,CAAY,CACRV,YAAY,CAAC,KAAD,CAAZ,CACAF,KAAK,CAACoB,QAAN,CAAepB,KAAK,CAACQ,EAArB,EACA,MAAOW,IAAG,CAACN,IAAJ,EAAP,CACH,CAJD,IAKK,CACD,MAAOM,IAAG,CAACN,IAAJ,GAAWK,IAAX,CAAgB,SAACJ,IAAD,CAAU,CAC7B,GAAIO,aAAY,CAAG,eAAnB,CACA,GAAIP,IAAI,EAAIA,IAAI,CAACX,KAAb,EAAsBW,IAAI,CAACX,KAAL,CAAWY,OAArC,CAA8C,CAC1CM,YAAY,CAAGP,IAAI,CAACX,KAAL,CAAWY,OAA1B,CACH,CACD,KAAM,IAAIJ,MAAJ,CAAUU,YAAV,CAAN,CACH,CANM,CAAP,CAOH,CACJ,CAnBD,EAmBGC,KAnBH,CAmBS,SAACnB,KAAD,CAAW,CAChBD,YAAY,CAAC,KAAD,CAAZ,CACH,CArBD,EAsBH,CAxBD,CA0BA,mBACI,KAAC,QAAD,wBACQ,YAAK,SAAS,CAAC,eAAf,uBACI,YAAK,SAAS,CAAC,sBAAf,uBACI,aAAK,SAAS,CAAC,WAAf,wBACI,WAAI,SAAS,CAAC,YAAd,UAA4BF,KAAK,CAACuB,QAAlC,EADJ,cAEI,gCACI,KAAC,QAAD,EAAU,MAAM,CAAEvB,KAAK,CAACuB,QAAxB,EADJ,EAFJ,CAKKvB,KAAK,CAACwB,gBAAN,eAA0B,gBAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAER,MAA/B,CAAuC,SAAS,CAAC,gDAAjD,WACtBf,SAAS,eAAI,YAAK,SAAS,CAAC,+BAAf,uBACV,YAAK,SAAS,CAAC,gBAAf,CAAgC,IAAI,CAAC,QAArC,uBACI,aAAM,SAAS,CAAC,iBAAhB,wBADJ,EADU,EADS,CAMtB,CAACA,SAAD,eAAc,KAAC,GAAD,EAAK,SAAS,CAAC,kBAAf,CAAkC,IAAI,CAAE,EAAxC,EANQ,GAL/B,cAeI,eAAQ,SAAS,CAAC,mDAAlB,CAAsE,IAAI,CAAC,QAA3E,CAAoF,OAAO,CAAEI,iBAA7F,uBACI,KAAC,QAAD,EAAU,SAAS,CAAC,MAApB,EADJ,EAfJ,GADJ,EADJ,EADR,EADJ,CA4BH,CA9ED,CA+EA,cAAeN,YAAf"},"metadata":{},"sourceType":"module"}