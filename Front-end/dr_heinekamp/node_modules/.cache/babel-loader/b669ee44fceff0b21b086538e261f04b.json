{"ast":null,"code":"import _slicedToArray from\"H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useRef,useState}from'react';import AuthContext from'../../store/auth-context';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AuthForm=function AuthForm(){var context=useContext(AuthContext);var history=useHistory();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLogin=_useState2[0],setIsLogin=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var emailInputRef=useRef();var passwordInputRef=useRef();var switchAuthModeHandler=function switchAuthModeHandler(){setIsLogin(function(prevState){return!prevState;});};var formSubmitHandler=function formSubmitHandler(event){event.preventDefault();setMessage('');setIsLoading(true);var enteredEmail=emailInputRef.current.value;var enteredPassword=passwordInputRef.current.value;var url;if(isLogin){url='https://sharingfileapp2022.azurewebsites.net/api/auth/login';}else{url='https://sharingfileapp2022.azurewebsites.net/api/auth/register';}fetch(url,{method:'POST',body:JSON.stringify({email:enteredEmail,password:enteredPassword}),headers:{'Content-Type':'application/json'},credentials:\"include\"}).then(function(res){if(res.ok){if(isLogin){// do something with login \n// You can redirect or show a string message\nsetMessage('Authentication succeeded.');}else{history.replace('/auth');setMessage('Your registration completed successfully.');}setIsLoading(false);return res.json();}else{return res.json().then(function(data){var errorMessage='Authentication failed';if(data&&data.error&&data.error.message){errorMessage=data.error.message;}throw new Error(errorMessage);});}}).then(function(data){context.login(data.token,data.email,data.userId);history.replace('/dashboard');}).catch(function(error){setIsLoading(false);setMessage(error.message);});};return/*#__PURE__*/_jsx(\"section\",{className:\"rounded-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",children:isLogin?'Sign In':'Sign Up'}),message&&/*#__PURE__*/_jsx(\"h5\",{className:\"text-danger text-center pt-3\",children:message}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-danger text-center\",children:isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:formSubmitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Your Email\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"email\",id:\"email\",required:true,ref:emailInputRef})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Your Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"password\",id:\"password\",required:true,ref:passwordInputRef})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pb-3 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary rounded-3\",children:[isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}),!isLoading&&isLogin&&'Login',!isLoading&&!isLogin&&'Create Account']})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn text-primary\",onClick:switchAuthModeHandler,children:isLogin?'Create new account':'Login with existing account'})]})]})]})});};export default AuthForm;","map":{"version":3,"names":["React","useContext","useRef","useState","AuthContext","useHistory","AuthForm","context","history","isLogin","setIsLogin","message","setMessage","isLoading","setIsLoading","emailInputRef","passwordInputRef","switchAuthModeHandler","prevState","formSubmitHandler","event","preventDefault","enteredEmail","current","value","enteredPassword","url","fetch","method","body","JSON","stringify","email","password","headers","credentials","then","res","ok","replace","json","data","errorMessage","error","Error","login","token","userId","catch"],"sources":["H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/src/Components/Auth/AuthForm.js"],"sourcesContent":["import React, { useContext, useRef, useState } from 'react';\nimport AuthContext from '../../store/auth-context';\nimport { useHistory } from 'react-router-dom';\n\nconst AuthForm = () => {\n  const context = useContext(AuthContext)\n  const history = useHistory();\n  const [isLogin, setIsLogin] = useState(true);\n  const [message, setMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const emailInputRef = useRef();\n  const passwordInputRef = useRef();\n\n  const switchAuthModeHandler = () => {\n    setIsLogin((prevState) => !prevState);\n  };\n\n  const formSubmitHandler = (event) => {\n    event.preventDefault();\n    setMessage('');\n    setIsLoading(true);\n    const enteredEmail = emailInputRef.current.value;\n    const enteredPassword = passwordInputRef.current.value;\n\n\n    let url;\n    if (isLogin) {\n      url = 'https://sharingfileapp2022.azurewebsites.net/api/auth/login';\n    }\n    else {\n      url = 'https://sharingfileapp2022.azurewebsites.net/api/auth/register';\n    }\n    fetch(url,\n      {\n        method: 'POST',\n        body: JSON.stringify(\n          {\n            email: enteredEmail, password: enteredPassword\n          }\n        ),\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: \"include\"\n      }\n    ).then(res => {\n      if (res.ok) {\n        if (isLogin) {\n          // do something with login \n          // You can redirect or show a string message\n\n          setMessage('Authentication succeeded.');\n        }\n        else {\n          history.replace('/auth');\n          setMessage('Your registration completed successfully.');\n        }\n        setIsLoading(false);\n        return res.json();\n      }\n      else {\n        return res.json().then((data) => {\n          let errorMessage = 'Authentication failed';\n          if (data && data.error && data.error.message) {\n            errorMessage = data.error.message;\n          }\n          throw new Error(errorMessage);\n        });\n      }\n    }).then((data) => {\n      context.login(data.token, data.email, data.userId);\n      history.replace('/dashboard');\n\n    }).catch((error) => {\n      setIsLoading(false);\n      setMessage(error.message);\n    });\n  }\n\n  return (\n    <section className='rounded-3'>\n      <div className='p-3'>\n        <h3 className='text-center'>{isLogin ? 'Sign In' : 'Sign Up'}</h3>\n        {message && <h5 className='text-danger text-center pt-3'>{message}</h5>}\n        <h4 className='text-danger text-center'>\n          {\n            isLoading && <div className=\"spinner-border\" role=\"status\">\n              <span className=\"visually-hidden\">Loading...</span>\n            </div>\n          }\n        </h4>\n        <form onSubmit={formSubmitHandler}>\n          <div className='pb-3'>\n            <label htmlFor='email'>Your Email</label>\n            <input className='form-control' type='email' id='email' required ref={emailInputRef} />\n          </div>\n          <div className='pb-3'>\n            <label htmlFor='password'>Your Password</label>\n            <input className='form-control' type='password' id='password' required ref={passwordInputRef} />\n          </div>\n          <div className='pb-3 text-center'>\n            <p>\n              <button className='btn btn-primary rounded-3'>\n                {\n                  isLoading && <div className=\"spinner-border\" role=\"status\">\n                    <span className=\"visually-hidden\">Loading...</span>\n                  </div>\n                }\n                \n                {!isLoading && isLogin && 'Login'}\n                {!isLoading && !isLogin && 'Create Account'}\n                </button>\n            </p>\n            <button\n              type='button'\n              className='btn text-primary'\n              onClick={switchAuthModeHandler}\n            >\n              {isLogin ? 'Create new account' : 'Login with existing account'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </section>\n  );\n};\n\nexport default AuthForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}