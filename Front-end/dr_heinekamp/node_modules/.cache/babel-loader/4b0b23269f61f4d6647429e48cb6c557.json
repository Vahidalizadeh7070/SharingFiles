{"ast":null,"code":"import _regeneratorRuntime from\"H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Fragment,useContext,useState,useCallback,useEffect}from\"react\";import AuthContext from\"../../../store/auth-context\";import FileItem from\"./FileItem\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FilesList=function FilesList(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),files=_useState4[0],setFiles=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var context=useContext(AuthContext);var RetrieveFiles=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data,loadFiles,key;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.prev=1;_context.next=4;return fetch('https://sharingfileapp2022.azurewebsites.net/api/UserFiles?userId='+context.userId);case 4:response=_context.sent;if(!(response.status===404)){_context.next=9;break;}throw new Error('There is no file in your list');case 9:if(response.ok){_context.next=11;break;}throw new Error('Something went wrong!!!');case 11:_context.next=13;return response.json();case 13:data=_context.sent;loadFiles=[];for(key in data.value){loadFiles.push({id:data.value[key].id,key:data.value[key].id,title:data.value[key].title,uploadDate:data.value[key].uploadDate,file:data.value[key].file});}setFiles(loadFiles);_context.next=22;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](1);setError(_context.t0.message);case 22:setIsLoading(false);case 23:case\"end\":return _context.stop();}}},_callee,null,[[1,19]]);})),[context.userId]);useEffect(function(){RetrieveFiles();},[RetrieveFiles]);var content=/*#__PURE__*/_jsx(\"p\",{className:\"fs-4 text-center\",children:\"There is no File in the list...\"});if(isLoading){content=/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center mt-5 mb-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})});}if(error){content=/*#__PURE__*/_jsx(\"p\",{className:\"text-danger text-center fs-4\",children:error});}var details=function details(value){props.FileDetails(value);};var Remove=function Remove(value){setFiles(files.filter(function(element){return element.id!==value;}));};if(files.length>0){content=files.map(function(file){return/*#__PURE__*/_jsx(FileItem,{id:file.id,title:file.title,uploadDate:file.uploadDate,file:file.file,FileDetails:details,Remove:Remove},file.id);});}return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-secondary\",children:\"Files\"}),/*#__PURE__*/_jsx(\"p\",{className:\"small\",children:\"You can observe all of your files that you have uploaded.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"small fw-light\",children:\"If you want to delete a file, make sure about it that there is not any subfile.\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:content})]});};export default FilesList;","map":{"version":3,"names":["React","Fragment","useContext","useState","useCallback","useEffect","AuthContext","FileItem","FilesList","props","isLoading","setIsLoading","files","setFiles","error","setError","context","RetrieveFiles","fetch","userId","response","status","Error","ok","json","data","loadFiles","key","value","push","id","title","uploadDate","file","message","content","details","FileDetails","Remove","filter","element","length","map"],"sources":["H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/src/Components/Dashboard/Files/FilesList.js"],"sourcesContent":["import React, { Fragment, useContext, useState, useCallback, useEffect } from \"react\"\r\nimport AuthContext from \"../../../store/auth-context\";\r\nimport FileItem from \"./FileItem\";\r\n\r\nconst FilesList = (props) => {\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [files, setFiles] = useState([]);\r\n    const [error, setError] = useState(null);\r\n    const context = useContext(AuthContext);\r\n\r\n    const RetrieveFiles = useCallback(async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const response = await fetch('https://sharingfileapp2022.azurewebsites.net/api/UserFiles?userId=' + context.userId);\r\n\r\n            if (response.status === 404) {\r\n                throw new Error('There is no file in your list');\r\n            }\r\n            else if (!response.ok) {\r\n                throw new Error('Something went wrong!!!');\r\n            }\r\n            const data = await response.json();\r\n\r\n            const loadFiles = [];\r\n            for (const key in data.value) {\r\n\r\n                loadFiles.push(\r\n                    {\r\n                        id: data.value[key].id,\r\n                        key: data.value[key].id,\r\n                        title: data.value[key].title,\r\n                        uploadDate: data.value[key].uploadDate,\r\n                        file: data.value[key].file\r\n                    }\r\n                );\r\n            }\r\n            setFiles(loadFiles);\r\n        }\r\n        catch (error) {\r\n            setError(error.message);\r\n\r\n        }\r\n        setIsLoading(false);\r\n    }, [context.userId]);\r\n\r\n    \r\n\r\n    useEffect(() => {\r\n        RetrieveFiles();\r\n    }, [RetrieveFiles])\r\n\r\n\r\n\r\n    let content = <p className='fs-4 text-center'>There is no File in the list...</p>;\r\n    if (isLoading) {\r\n        content = (\r\n            <div className=\"d-flex justify-content-center mt-5 mb-5\">\r\n                <div className=\"spinner-border\" role=\"status\">\r\n                    <span className=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    if (error) {\r\n        content = <p className='text-danger text-center fs-4'>{error}</p>;\r\n\r\n    }\r\n    const details = (value) => {\r\n        props.FileDetails(value);\r\n    }\r\n    const Remove = (value) => {\r\n        setFiles(files.filter(element => element.id !== value))\r\n    }\r\n\r\n    if (files.length > 0) {\r\n        content = (\r\n            files.map(file =>\r\n                <FileItem\r\n                    id={file.id}\r\n                    key={file.id}\r\n                    title={file.title}\r\n                    uploadDate={file.uploadDate}\r\n                    file={file.file}\r\n                    FileDetails={details}\r\n                    Remove={Remove}\r\n                />\r\n            )\r\n        )\r\n    }\r\n    return (\r\n        <Fragment>\r\n            <h3 className=\"text-secondary\">Files</h3>\r\n            <p className=\"small\">You can observe all of your files that you have uploaded.</p>\r\n            <p className=\"small fw-light\">If you want to delete a file, make sure about it that there is not any subfile.</p>\r\n            <hr />\r\n            <div className=\"row\">\r\n                {content}\r\n            </div>\r\n        </Fragment>\r\n    )\r\n}\r\nexport default FilesList;"],"mappings":"obAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,CAAsCC,QAAtC,CAAgDC,WAAhD,CAA6DC,SAA7D,KAA8E,OAA9E,CACA,MAAOC,YAAP,KAAwB,6BAAxB,CACA,MAAOC,SAAP,KAAqB,YAArB,C,wFAEA,GAAMC,UAAS,CAAG,QAAZA,UAAY,CAACC,KAAD,CAAW,CACzB,cAAkCN,QAAQ,CAAC,KAAD,CAA1C,wCAAOO,SAAP,eAAkBC,YAAlB,eACA,eAA0BR,QAAQ,CAAC,EAAD,CAAlC,yCAAOS,KAAP,eAAcC,QAAd,eACA,eAA0BV,QAAQ,CAAC,IAAD,CAAlC,yCAAOW,KAAP,eAAcC,QAAd,eACA,GAAMC,QAAO,CAAGd,UAAU,CAACI,WAAD,CAA1B,CAEA,GAAMW,cAAa,CAAGb,WAAW,wEAAC,qKAC9BO,YAAY,CAAC,IAAD,CAAZ,CAD8B,sCAGHO,MAAK,CAAC,qEAAuEF,OAAO,CAACG,MAAhF,CAHF,QAGpBC,QAHoB,oBAKtBA,QAAQ,CAACC,MAAT,GAAoB,GALE,+BAMhB,IAAIC,MAAJ,CAAU,+BAAV,CANgB,WAQhBF,QAAQ,CAACG,EARO,+BAShB,IAAID,MAAJ,CAAU,yBAAV,CATgB,gCAWPF,SAAQ,CAACI,IAAT,EAXO,SAWpBC,IAXoB,eAapBC,SAboB,CAaR,EAbQ,CAc1B,IAAWC,GAAX,GAAkBF,KAAI,CAACG,KAAvB,CAA8B,CAE1BF,SAAS,CAACG,IAAV,CACI,CACIC,EAAE,CAAEL,IAAI,CAACG,KAAL,CAAWD,GAAX,EAAgBG,EADxB,CAEIH,GAAG,CAAEF,IAAI,CAACG,KAAL,CAAWD,GAAX,EAAgBG,EAFzB,CAGIC,KAAK,CAAEN,IAAI,CAACG,KAAL,CAAWD,GAAX,EAAgBI,KAH3B,CAIIC,UAAU,CAAEP,IAAI,CAACG,KAAL,CAAWD,GAAX,EAAgBK,UAJhC,CAKIC,IAAI,CAAER,IAAI,CAACG,KAAL,CAAWD,GAAX,EAAgBM,IAL1B,CADJ,EASH,CACDpB,QAAQ,CAACa,SAAD,CAAR,CA1B0B,iFA6B1BX,QAAQ,CAAC,YAAMmB,OAAP,CAAR,CA7B0B,QAgC9BvB,YAAY,CAAC,KAAD,CAAZ,CAhC8B,qEAAD,GAiC9B,CAACK,OAAO,CAACG,MAAT,CAjC8B,CAAjC,CAqCAd,SAAS,CAAC,UAAM,CACZY,aAAa,GAChB,CAFQ,CAEN,CAACA,aAAD,CAFM,CAAT,CAMA,GAAIkB,QAAO,cAAG,UAAG,SAAS,CAAC,kBAAb,6CAAd,CACA,GAAIzB,SAAJ,CAAe,CACXyB,OAAO,cACH,YAAK,SAAS,CAAC,yCAAf,uBACI,YAAK,SAAS,CAAC,gBAAf,CAAgC,IAAI,CAAC,QAArC,uBACI,aAAM,SAAS,CAAC,iBAAhB,wBADJ,EADJ,EADJ,CAOH,CACD,GAAIrB,KAAJ,CAAW,CACPqB,OAAO,cAAG,UAAG,SAAS,CAAC,8BAAb,UAA6CrB,KAA7C,EAAV,CAEH,CACD,GAAMsB,QAAO,CAAG,QAAVA,QAAU,CAACR,KAAD,CAAW,CACvBnB,KAAK,CAAC4B,WAAN,CAAkBT,KAAlB,EACH,CAFD,CAGA,GAAMU,OAAM,CAAG,QAATA,OAAS,CAACV,KAAD,CAAW,CACtBf,QAAQ,CAACD,KAAK,CAAC2B,MAAN,CAAa,SAAAC,OAAO,QAAIA,QAAO,CAACV,EAAR,GAAeF,KAAnB,EAApB,CAAD,CAAR,CACH,CAFD,CAIA,GAAIhB,KAAK,CAAC6B,MAAN,CAAe,CAAnB,CAAsB,CAClBN,OAAO,CACHvB,KAAK,CAAC8B,GAAN,CAAU,SAAAT,IAAI,qBACV,KAAC,QAAD,EACI,EAAE,CAAEA,IAAI,CAACH,EADb,CAGI,KAAK,CAAEG,IAAI,CAACF,KAHhB,CAII,UAAU,CAAEE,IAAI,CAACD,UAJrB,CAKI,IAAI,CAAEC,IAAI,CAACA,IALf,CAMI,WAAW,CAAEG,OANjB,CAOI,MAAM,CAAEE,MAPZ,EAESL,IAAI,CAACH,EAFd,CADU,EAAd,CADJ,CAaH,CACD,mBACI,MAAC,QAAD,yBACI,WAAI,SAAS,CAAC,gBAAd,mBADJ,cAEI,UAAG,SAAS,CAAC,OAAb,uEAFJ,cAGI,UAAG,SAAS,CAAC,gBAAb,6FAHJ,cAII,aAJJ,cAKI,YAAK,SAAS,CAAC,KAAf,UACKK,OADL,EALJ,GADJ,CAWH,CAhGD,CAiGA,cAAe3B,UAAf"},"metadata":{},"sourceType":"module"}