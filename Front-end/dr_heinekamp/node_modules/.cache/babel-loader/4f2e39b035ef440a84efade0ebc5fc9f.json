{"ast":null,"code":"import _regeneratorRuntime from\"H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Fragment,useCallback,useState,useEffect,useContext}from\"react\";import AuthContext from\"../../store/auth-context\";import InboxItem from\"./InboxItem\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Inbox=function Inbox(){var context=useContext(AuthContext);var userId=context.userId;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),inbox=_useState4[0],setInbox=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var RetrieveInbox=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data,loadInbox,key;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.prev=1;_context.next=4;return fetch('https://sharingfileapp2022.azurewebsites.net/api/inbox?userId='+userId);case 4:response=_context.sent;if(!(response.status===404)){_context.next=9;break;}setError(\"There is no file in your inbox\");_context.next=11;break;case 9:if(response.ok){_context.next=11;break;}throw new Error('Something went wrong!!!');case 11:_context.next=13;return response.json();case 13:data=_context.sent;loadInbox=[];for(key in data.value){loadInbox.push({id:data.value[key].id,userId:data.value[key].userId,userFilesId:data.value[key].userFilesId,expirationDate:data.value[key].expirationDate,downloadURL:data.value[key].downloadURL,download:data.value[key].download,senderUserName:data.value[key].senderUserName,fileName:data.value[key].fileName,title:data.value[key].title});}setInbox(loadInbox);_context.next=22;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](1);setError(_context.t0.message);case 22:setIsLoading(false);case 23:case\"end\":return _context.stop();}}},_callee,null,[[1,19]]);})),[userId]);useEffect(function(){RetrieveInbox();},[RetrieveInbox]);var content=/*#__PURE__*/_jsx(\"p\",{className:\"fs-4 text-center\",children:\"There is no file in your inbox ...\"});if(isLoading){content=/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center mt-5 mb-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})});}if(error){content=/*#__PURE__*/_jsx(\"p\",{className:\"text-danger text-center fs-4\",children:error});}if(inbox.length>0){content=inbox.map(function(inboxes){return/*#__PURE__*/_jsx(InboxItem,{id:inboxes.id,userId:inboxes.userId,userFilesId:inboxes.userFilesId,expirationDate:inboxes.expirationDate,downloadURL:inboxes.downloadURL,download:inboxes.download,senderUserName:inboxes.senderUserName,fileName:inboxes.fileName,title:inboxes.title},inboxes.id);});}return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-secondary\",children:\"Inbox\"}),/*#__PURE__*/_jsx(\"p\",{className:\"small\",children:\"You can download all files that have been shared for you\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:content})]});};export default Inbox;","map":{"version":3,"names":["React","Fragment","useCallback","useState","useEffect","useContext","AuthContext","InboxItem","Inbox","context","userId","isLoading","setIsLoading","inbox","setInbox","error","setError","RetrieveInbox","fetch","response","status","ok","Error","json","data","loadInbox","key","value","push","id","userFilesId","expirationDate","downloadURL","download","senderUserName","fileName","title","message","content","length","map","inboxes"],"sources":["H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/src/Components/Inbox/Inbox.js"],"sourcesContent":["import React, { Fragment, useCallback, useState, useEffect, useContext } from \"react\";\r\nimport AuthContext from \"../../store/auth-context\";\r\nimport InboxItem from \"./InboxItem\";\r\n\r\nconst Inbox = () => {\r\n    const context = useContext(AuthContext);\r\n    const userId = context.userId;\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [inbox, setInbox] = useState([]);\r\n    const [error, setError] = useState(null);\r\n\r\n    const RetrieveInbox = useCallback(async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const response = await fetch('https://sharingfileapp2022.azurewebsites.net/api/inbox?userId=' + userId);\r\n            if(response.status===404)\r\n            {\r\n                setError(\"There is no file in your inbox\");\r\n            }\r\n            else if (!response.ok) {\r\n                throw new Error('Something went wrong!!!');\r\n            }\r\n            const data = await response.json();\r\n\r\n            const loadInbox = [];\r\n            for (const key in data.value) {\r\n\r\n                loadInbox.push(\r\n                    {\r\n                        id: data.value[key].id,\r\n                        userId: data.value[key].userId,\r\n                        userFilesId: data.value[key].userFilesId,\r\n                        expirationDate: data.value[key].expirationDate,\r\n                        downloadURL: data.value[key].downloadURL,\r\n                        download: data.value[key].download,\r\n                        senderUserName: data.value[key].senderUserName,\r\n                        fileName: data.value[key].fileName,\r\n                        title: data.value[key].title,\r\n                    }\r\n                );\r\n            }\r\n            setInbox(loadInbox);\r\n\r\n        }\r\n        catch (error) {\r\n            setError(error.message);\r\n        }\r\n        setIsLoading(false);\r\n    }, [userId]);\r\n\r\n    useEffect(() => {\r\n        RetrieveInbox();\r\n    }, [RetrieveInbox])\r\n\r\n    let content = <p className='fs-4 text-center'>There is no file in your inbox ...</p>;\r\n    if (isLoading) {\r\n        content = (\r\n            <div className=\"d-flex justify-content-center mt-5 mb-5\">\r\n                <div className=\"spinner-border\" role=\"status\">\r\n                    <span className=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    if (error) {\r\n        content = <p className='text-danger text-center fs-4'>{error}</p>;\r\n    }\r\n    if (inbox.length > 0) {\r\n        content = (\r\n            inbox.map(inboxes =>\r\n                <InboxItem\r\n                    id={inboxes.id}\r\n                    key={inboxes.id}\r\n                    userId={inboxes.userId}\r\n                    userFilesId={inboxes.userFilesId}\r\n                    expirationDate={inboxes.expirationDate}\r\n                    downloadURL={inboxes.downloadURL}\r\n                    download={inboxes.download}\r\n                    senderUserName={inboxes.senderUserName}\r\n                    fileName={inboxes.fileName}\r\n                    title = {inboxes.title}\r\n                />\r\n            )\r\n        )\r\n    }\r\n    return (\r\n        <Fragment>\r\n            <h3 className=\"text-secondary\">Inbox</h3>\r\n            <p className=\"small\">You can download all files that have been shared for you</p>\r\n            <hr />\r\n            <div className=\"row\">\r\n                {content}\r\n            </div>\r\n        </Fragment>\r\n    )\r\n}\r\nexport default Inbox;"],"mappings":"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"},"metadata":{},"sourceType":"module"}