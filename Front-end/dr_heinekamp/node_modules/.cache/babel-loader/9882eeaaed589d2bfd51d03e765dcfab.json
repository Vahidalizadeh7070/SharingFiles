{"ast":null,"code":"import _slicedToArray from\"H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Fragment,useContext,useState}from\"react\";import{ArrowLeft}from\"react-bootstrap-icons\";import{Link}from\"react-router-dom\";import{useHistory}from\"react-router-dom\";import AuthContext from\"../../../store/auth-context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddFileForm=function AddFileForm(){var history=useHistory();var context=useContext(AuthContext);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),file=_useState4[0],setFile=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isLoading=_useState10[0],setIsLoading=_useState10[1];var TitleEventHandler=function TitleEventHandler(event){setTitle(event.target.value);};var saveFile=function saveFile(e){setFile(e.target.files[0]);};var postData=function postData(e){setIsLoading(true);e.preventDefault();var formData=new FormData();formData.append(\"Title\",title);formData.append(\"UploadFile\",file);formData.append(\"UserId\",context.userId);fetch(\"https://sharingfileapp2022.azurewebsites.net/api/userFiles/upload\",{method:'POST',body:formData}).then(function(res){if(res.ok){setMessage('Upload file succeeded.');setIsLoading(false);return res.json();}else{return res.json().then(function(data){var errorMessage='Upload file failed';if(data&&data.error&&data.error.message){errorMessage=data.error.message;}throw new Error(errorMessage);});}}).then(function(data){history.replace('/dashboard');}).catch(function(error){setIsLoading(false);setError(error.message);});};return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 offset-md-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"shadow rounded-3 mt-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-10\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-secondary\",children:\"Add file\"}),/*#__PURE__*/_jsx(\"p\",{className:\"small\",children:\"You can add any type of file then you can add multiple files from details section in your dashboard.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-2\",children:/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"btn btn-sm rounded-circle border border-1 float-end shadow\",children:/*#__PURE__*/_jsx(ArrowLeft,{className:\"pb-1\",size:18})})})]}),message&&/*#__PURE__*/_jsx(\"h4\",{className:\"text-danger text-center\",children:message}),error&&/*#__PURE__*/_jsx(\"h4\",{className:\"text-danger text-center\",children:error}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",htmlFor:\"Title\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",id:\"Title\",onChange:TitleEventHandler,placeholder:\"Enter your title\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",htmlFor:\"file\",children:\"File\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"form-control\",id:\"file\",onChange:saveFile})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"pt-3\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary shadow rounded-3 float-end\",onClick:postData,children:[isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})}),!isLoading&&\"Upload\"]})})})]})})})});};export default AddFileForm;","map":{"version":3,"names":["Fragment","useContext","useState","ArrowLeft","Link","useHistory","AuthContext","AddFileForm","history","context","title","setTitle","file","setFile","message","setMessage","error","setError","isLoading","setIsLoading","TitleEventHandler","event","target","value","saveFile","e","files","postData","preventDefault","formData","FormData","append","userId","fetch","method","body","then","res","ok","json","data","errorMessage","Error","replace","catch"],"sources":["H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/src/Components/Dashboard/Files/AddFileForm.js"],"sourcesContent":["import { Fragment, useContext, useState } from \"react\"\r\nimport { ArrowLeft } from \"react-bootstrap-icons\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport AuthContext from \"../../../store/auth-context\";\r\n\r\nconst AddFileForm = () => {\r\n    const history = useHistory();\r\n    const context = useContext(AuthContext);\r\n    const [title, setTitle] = useState('');\r\n    const [file, setFile] = useState();\r\n    const [message, setMessage] = useState('');\r\n    const [error, setError] = useState();\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const TitleEventHandler = (event) => {\r\n        setTitle(event.target.value);\r\n    }\r\n\r\n    const saveFile = (e) => {\r\n        setFile(e.target.files[0]);\r\n    }\r\n\r\n    const postData = (e) => {\r\n        setIsLoading(true);\r\n        e.preventDefault();\r\n        const formData = new FormData();\r\n        formData.append(\"Title\", title)\r\n        formData.append(\"UploadFile\", file)\r\n        formData.append(\"UserId\", context.userId)\r\n\r\n        fetch(\"https://sharingfileapp2022.azurewebsites.net/api/userFiles/upload\",\r\n            {\r\n                method: 'POST',\r\n                body: formData\r\n            }\r\n        ).then(res => {\r\n            if (res.ok) {\r\n                setMessage('Upload file succeeded.');\r\n                setIsLoading(false);\r\n                return res.json();\r\n            }\r\n            else {\r\n                return res.json().then((data) => {\r\n                    let errorMessage = 'Upload file failed';\r\n                    if (data && data.error && data.error.message) {\r\n                        errorMessage = data.error.message;\r\n                    }\r\n                    throw new Error(errorMessage);\r\n                });\r\n            }\r\n        }).then((data) => {\r\n            history.replace('/dashboard');\r\n\r\n        }).catch((error) => {\r\n            setIsLoading(false);\r\n            setError(error.message);\r\n        });\r\n\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n            <div className=\"col-md-6 offset-md-3\">\r\n                <div className=\"shadow rounded-3 mt-3\">\r\n                    <div className=\"p-3\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-10\">\r\n                                <h3 className=\"text-secondary\">Add file</h3>\r\n                                <p className=\"small\">You can add any type of file then you can add multiple files from details section in your dashboard.</p>\r\n                            </div>\r\n                            <div className=\"col-2\">\r\n                                <Link to=\"/dashboard\" className=\"btn btn-sm rounded-circle border border-1 float-end shadow\"><ArrowLeft className=\"pb-1\" size={18} /></Link>\r\n                            </div>\r\n                        </div>\r\n                        {message && <h4 className=\"text-danger text-center\">{message}</h4>}\r\n                        {error && <h4 className=\"text-danger text-center\">{error}</h4>}\r\n                        <hr />\r\n                        <div className=\"row\">\r\n                            <div className=\"col-md-6\">\r\n                                <label className=\"form-label\" htmlFor=\"Title\">Title</label>\r\n                                <input className=\"form-control\" id=\"Title\" onChange={TitleEventHandler} placeholder=\"Enter your title\" />\r\n                            </div>\r\n                            <div className=\"col-md-6\">\r\n                                <label className=\"form-label\" htmlFor=\"file\">File</label>\r\n                                <input type=\"file\" className=\"form-control\" id=\"file\" onChange={saveFile} />\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div className=\"row\">\r\n                            <div className=\"pt-3\">\r\n                                <button className=\"btn btn-primary shadow rounded-3 float-end\" onClick={postData}>\r\n                                    {\r\n                                        isLoading && <div className=\"d-flex justify-content-center\">\r\n                                            <div className=\"spinner-border\" role=\"status\">\r\n                                                <span className=\"visually-hidden\">Loading...</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    }\r\n                                    {!isLoading && \"Upload\"}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Fragment>\r\n    )\r\n}\r\nexport default AddFileForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}