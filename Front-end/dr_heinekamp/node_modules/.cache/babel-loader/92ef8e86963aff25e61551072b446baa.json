{"ast":null,"code":"import _regeneratorRuntime from\"H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Fragment,useState,useCallback,useEffect}from\"react\";import SubFileItem from\"./SubFileItem\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ListOfSubFiles=function ListOfSubFiles(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),subFiles=_useState2[0],setSubFiles=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isEmpty=_useState8[0],setIsEmpty=_useState8[1];var RetrieveSubFiles=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data,loadSubFiles,key;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.prev=1;_context.next=4;return fetch('https://sharingfileapp2022.azurewebsites.net/api/userfiles/ListOfSubFiles?fileId='+props.fileId);case 4:response=_context.sent;if(!(response.status===404)){_context.next=10;break;}setIsEmpty(true);throw new Error('There is no file in your list');case 10:if(response.ok){_context.next=13;break;}setIsEmpty(true);throw new Error('Something went wrong!!!');case 13:_context.next=15;return response.json();case 15:data=_context.sent;loadSubFiles=[];for(key in data.value){loadSubFiles.push({id:data.value[key].id,key:data.value[key].id,fileName:data.value[key].fileName});}setIsEmpty(false);setSubFiles(loadSubFiles);_context.next=26;break;case 22:_context.prev=22;_context.t0=_context[\"catch\"](1);setIsEmpty(true);setError(_context.t0.message);case 26:setIsLoading(false);case 27:case\"end\":return _context.stop();}}},_callee,null,[[1,22]]);})),[props]);useEffect(function(){RetrieveSubFiles();},[RetrieveSubFiles]);var Remove=function Remove(value){setSubFiles(subFiles.filter(function(element){return element.id!==value;}));};var content=/*#__PURE__*/_jsx(\"p\",{className:\"fs-4 text-center\",children:\"There is no extra files in the list...\"});if(isLoading){content=/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center mt-5 mb-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})});}if(error){content=/*#__PURE__*/_jsx(\"p\",{className:\"text-danger text-center fs-4\",children:error});}if(subFiles.length>0&&!isEmpty){content=subFiles.map(function(subfile){return/*#__PURE__*/_jsx(SubFileItem,{id:subfile.id,fileName:subfile.fileName,onRemove:Remove,fileId:props.fileId,showDeleteButton:props.showDeleteButton},subfile.id);});}return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-secondary\",children:\"Other files\"}),/*#__PURE__*/_jsx(\"p\",{className:\"small fw-light\",children:\"You can see other files that you have been uploaded.\"}),/*#__PURE__*/_jsx(\"hr\",{}),content]});};export default ListOfSubFiles;","map":{"version":3,"names":["Fragment","useState","useCallback","useEffect","SubFileItem","ListOfSubFiles","props","subFiles","setSubFiles","isLoading","setIsLoading","error","setError","isEmpty","setIsEmpty","RetrieveSubFiles","fetch","fileId","response","status","Error","ok","json","data","loadSubFiles","key","value","push","id","fileName","message","Remove","filter","element","content","length","map","subfile","showDeleteButton"],"sources":["H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/src/Components/Dashboard/Files/ListOfSubFiles.js"],"sourcesContent":["import { Fragment, useState, useCallback, useEffect } from \"react\"\r\nimport SubFileItem from \"./SubFileItem\";\r\n\r\nconst ListOfSubFiles = (props) => {\r\n\r\n    const [subFiles, setSubFiles] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState();\r\n    const [isEmpty, setIsEmpty] = useState(false);\r\n    const RetrieveSubFiles = useCallback(async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const response = await fetch('https://sharingfileapp2022.azurewebsites.net/api/userfiles/ListOfSubFiles?fileId=' + props.fileId);\r\n\r\n            if (response.status === 404) {\r\n                setIsEmpty(true);\r\n                throw new Error('There is no file in your list');\r\n            }\r\n            else if (!response.ok) {\r\n                setIsEmpty(true);\r\n                throw new Error('Something went wrong!!!');\r\n            }\r\n            const data = await response.json();\r\n\r\n            const loadSubFiles = [];\r\n            for (const key in data.value) {\r\n\r\n                loadSubFiles.push(\r\n                    {\r\n                        id: data.value[key].id,\r\n                        key: data.value[key].id,\r\n                        fileName: data.value[key].fileName\r\n                    }\r\n                );\r\n            }\r\n\r\n            setIsEmpty(false);\r\n            setSubFiles(loadSubFiles);\r\n        }\r\n        catch (error) {\r\n            setIsEmpty(true);\r\n            setError(error.message);\r\n\r\n        }\r\n        setIsLoading(false);\r\n    }, [props]);\r\n\r\n    useEffect(() => {\r\n        RetrieveSubFiles();\r\n    }, [RetrieveSubFiles])\r\n\r\n    const Remove = (value) => {\r\n        setSubFiles(subFiles.filter(element => element.id !== value))\r\n    }\r\n\r\n\r\n    let content = <p className='fs-4 text-center'>There is no extra files in the list...</p>;\r\n    if (isLoading) {\r\n        content = (\r\n            <div className=\"d-flex justify-content-center mt-5 mb-5\">\r\n                <div className=\"spinner-border\" role=\"status\">\r\n                    <span className=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    if (error) {\r\n        content = <p className='text-danger text-center fs-4'>{error}</p>;\r\n\r\n    }\r\n\r\n\r\n    if (subFiles.length > 0 && !isEmpty) {\r\n        content = (\r\n            subFiles.map(subfile =>\r\n                <SubFileItem\r\n                    id={subfile.id}\r\n                    key={subfile.id}\r\n                    fileName={subfile.fileName}\r\n                    onRemove={Remove}\r\n                    fileId={props.fileId}\r\n                    \r\n                    showDeleteButton={props.showDeleteButton}\r\n                />\r\n            )\r\n        )\r\n    }\r\n    return (\r\n        <Fragment>\r\n            <h3 className=\"text-secondary\">Other files</h3>\r\n            <p className=\"small fw-light\">You can see other files that you have been uploaded.</p>\r\n            <hr />\r\n            {content}\r\n        </Fragment>\r\n    )\r\n}\r\nexport default ListOfSubFiles;"],"mappings":"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"},"metadata":{},"sourceType":"module"}