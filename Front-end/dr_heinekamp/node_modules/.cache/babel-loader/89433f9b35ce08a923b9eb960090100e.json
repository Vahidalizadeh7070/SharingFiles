{"ast":null,"code":"import _slicedToArray from\"H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Fragment,useEffect,useState}from\"react\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var AddMultipleFiles=function AddMultipleFiles(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),file=_useState8[0],setFile=_useState8[1];var fileId=props.fileId;var saveFile=function saveFile(e){var files=[];for(var index=0;index<e.target.files.length;index++){files.push(e.target.files[index]);}setFile(files);};var postData=function postData(e){setIsLoading(true);e.preventDefault();var formData=new FormData();formData.append(\"UserFilesId\",fileId);for(var index=0;index<file.length;index++){formData.append(\"UploadFile\",file[index]);}fetch(\"https://sharingfileapp2022.azurewebsites.net/api/userFiles/uploadmultiple\",{method:'POST',body:formData}).then(function(res){if(res.ok){setMessage('Your files uploaded.');setIsLoading(false);props.LastFileUploaded(file);return res.json();}else{return res.json().then(function(data){var errorMessage='Upload file failed';if(data&&data.error&&data.error.message){errorMessage=data.error.message;}throw new Error(errorMessage);});}}).catch(function(error){setIsLoading(false);setError(error.message);});};useEffect(function(){setTimeout(function(){setMessage('');setError('');},3000);},[]);return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"text-secondary text-center\",children:[\"You can add extra files for \",props.fileName]}),message&&/*#__PURE__*/_jsx(\"h6\",{className:\"text-danger text-center\",children:message}),error&&/*#__PURE__*/_jsx(\"h6\",{className:\"text-danger text-center\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",htmlFor:\"file\",children:\"File\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"form-control\",id:\"file\",onChange:saveFile,multiple:true})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary float-end rounded-3 shadow mt-2 mb-4\",type:\"button\",onClick:postData,children:[isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})}),!isLoading&&\"Upload\"]})})]});};export default AddMultipleFiles;","map":{"version":3,"names":["React","Fragment","useEffect","useState","AddMultipleFiles","props","message","setMessage","error","setError","isLoading","setIsLoading","file","setFile","fileId","saveFile","e","files","index","target","length","push","postData","preventDefault","formData","FormData","append","fetch","method","body","then","res","ok","LastFileUploaded","json","data","errorMessage","Error","catch","setTimeout","fileName"],"sources":["H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/src/Components/Dashboard/Files/AddMultipleFiles.js"],"sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\r\n\r\nconst AddMultipleFiles = (props) => {\r\n    const [message, setMessage] = useState('');\r\n    const [error, setError] = useState();\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [file, setFile] = useState([]);\r\n    const fileId = props.fileId;\r\n\r\n    const saveFile = (e) => {\r\n        const files = [];\r\n        for (let index = 0; index < e.target.files.length; index++) {\r\n            files.push(e.target.files[index])\r\n        }\r\n        setFile(files);\r\n    }\r\n\r\n\r\n    const postData = (e) => {\r\n        setIsLoading(true);\r\n        e.preventDefault();\r\n        const formData = new FormData();\r\n        formData.append(\"UserFilesId\", fileId)\r\n        for (let index = 0; index < file.length; index++) {\r\n            formData.append(\"UploadFile\", file[index])\r\n        }\r\n\r\n\r\n        fetch(\"https://sharingfileapp2022.azurewebsites.net/api/userFiles/uploadmultiple\",\r\n            {\r\n                method: 'POST',\r\n                body: formData\r\n            }\r\n        ).then(res => {\r\n            if (res.ok) {\r\n                setMessage('Your files uploaded.');\r\n                setIsLoading(false);\r\n                props.LastFileUploaded(file);\r\n                return res.json();\r\n            }\r\n            else {\r\n                return res.json().then((data) => {\r\n                    let errorMessage = 'Upload file failed';\r\n                    if (data && data.error && data.error.message) {\r\n                        errorMessage = data.error.message;\r\n                    }\r\n                    throw new Error(errorMessage);\r\n                });\r\n            }\r\n        }).catch((error) => {\r\n            setIsLoading(false);\r\n            setError(error.message);\r\n        });\r\n    }\r\n    useEffect(() => {\r\n        setTimeout(() => {\r\n            setMessage('');\r\n            setError('');\r\n        }, 3000)\r\n    }, [])\r\n\r\n    return (\r\n        <Fragment>\r\n            <div className=\"row\">\r\n                <h5 className=\"text-secondary text-center\">You can add extra files for {props.fileName}</h5>\r\n                {message && <h6 className=\"text-danger text-center\">{message}</h6>}\r\n                {error && <h6 className=\"text-danger text-center\">{error}</h6>}\r\n                <div className=\"form-group\">\r\n                    <label className=\"form-label\" htmlFor=\"file\">File</label>\r\n                    <input type=\"file\" className=\"form-control\" id=\"file\" onChange={saveFile} multiple />\r\n                </div>\r\n            </div>\r\n            <div className=\"col-md-12\">\r\n                <button className=\"btn btn-primary float-end rounded-3 shadow mt-2 mb-4\" type=\"button\" onClick={postData}>\r\n                    {\r\n                        isLoading && <div className=\"d-flex justify-content-center\">\r\n                            <div className=\"spinner-border\" role=\"status\">\r\n                                <span className=\"visually-hidden\">Loading...</span>\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                    {!isLoading && \"Upload\"}\r\n                </button>\r\n            </div>\r\n        </Fragment>\r\n    )\r\n}\r\nexport default AddMultipleFiles;"],"mappings":"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"},"metadata":{},"sourceType":"module"}