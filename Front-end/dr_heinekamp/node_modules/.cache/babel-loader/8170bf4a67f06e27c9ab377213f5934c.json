{"ast":null,"code":"import _regeneratorRuntime from\"H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Fragment,useContext,useState,useCallback}from\"react\";import Moment from'moment';import{Download,Share,Upload}from\"react-bootstrap-icons\";import AuthContext from\"../../../store/auth-context\";import ConvasUsers from\"../Users/ConvasUsers\";import Modal from\"../Users/Modal\";import AddMultipleFiles from\"./AddMultipleFiles\";import ListOfSubFiles from\"./ListOfSubFiles\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Details=function Details(props){var details=props.DetailsFile;var context=useContext(AuthContext);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openConvas=_useState2[0],setOpenConvas=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),modal=_useState4[0],setModal=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),newSubFiles=_useState8[0],setNewSubFiles=_useState8[1];var OffConvasUsersOpen=function OffConvasUsersOpen(){setOpenConvas(!openConvas);};var MyDownload=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('https://sharingfileapp2022.azurewebsites.net/api/download/downloadbymyself?userId='+context.userId+'&file='+props.DetailsFile.file);case 3:response=_context.sent;if(!(response.status===400)){_context.next=8;break;}throw new Error('There is no file');case 8:if(response.ok){_context.next=10;break;}throw new Error('Something went wrong!!!');case 10:_context.next=12;return response.json();case 12:data=_context.sent;_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);setError(_context.t0.message);case 18:case\"end\":return _context.stop();}}},_callee,null,[[0,15]]);})),[context.userId,props.DetailsFile.file]);var MultipleModal=function MultipleModal(){setModal(!modal);};var SendNewFiles=function SendNewFiles(value){setNewSubFiles(value);};return Object.keys(details).length!==0?/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Details\"}),error&&/*#__PURE__*/_jsx(\"h5\",{className:\"text-danger text-center\",children:error}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-secondary\",children:props.DetailsFile.title}),/*#__PURE__*/_jsx(\"p\",{className:\"small fw-light\",children:Moment(props.DetailsFile.uploadDate).format('dddd - DD MMMM yyyy')})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-left\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Main file\"}),/*#__PURE__*/_jsx(\"p\",{className:\"small\",children:\"You can download main file by click on the Download.\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"small\",children:[\"If you need to add more files to \",/*#__PURE__*/_jsx(\"b\",{children:props.DetailsFile.title}),\" you can click on upload.\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"small\",children:\"Furthermore, you can share this file with all subfiles among the users by clicking on the share.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"pb-5\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-success btn-sm shadow rounded-3 mx-1 float-end\",type:\"button\",onClick:MyDownload,children:[\"Download \",/*#__PURE__*/_jsx(Download,{className:\"mb-1\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-sm rounded-circle float-end\",type:\"button\",onClick:OffConvasUsersOpen,children:/*#__PURE__*/_jsx(Share,{className:\"mb-1\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-info btn-sm rounded-circle float-end mx-1\",type:\"button\",onClick:MultipleModal,children:/*#__PURE__*/_jsx(Upload,{className:\"mb-1 text-light\"})}),modal&&/*#__PURE__*/_jsx(Modal,{title:\"Upload multiple\",onCloseModal:MultipleModal,children:/*#__PURE__*/_jsx(AddMultipleFiles,{LastFileUploaded:SendNewFiles,fileId:props.DetailsFile.id,fileName:props.DetailsFile.title})}),openConvas&&/*#__PURE__*/_jsx(\"div\",{id:\"modal\",children:/*#__PURE__*/_jsx(ConvasUsers,{fileId:props.DetailsFile.id,onClose:OffConvasUsersOpen})})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(ListOfSubFiles,{showDeleteButton:true,files:newSubFiles,fileId:props.DetailsFile.id})})]})]}):/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"mt-5 mb-5\",children:Object.keys(details).length!==0?/*#__PURE__*/_jsx(\"h3\",{className:\"text-danger text-center\",children:\"Please select a file from the list.\"}):/*#__PURE__*/_jsx(\"h3\",{className:\"text-danger text-center\",children:\"Please add a file to the list.\"})})});};export default Details;","map":{"version":3,"names":["React","Fragment","useContext","useState","useCallback","Moment","Download","Share","Upload","AuthContext","ConvasUsers","Modal","AddMultipleFiles","ListOfSubFiles","Details","props","details","DetailsFile","context","openConvas","setOpenConvas","modal","setModal","error","setError","newSubFiles","setNewSubFiles","OffConvasUsersOpen","MyDownload","fetch","userId","file","response","status","Error","ok","json","data","message","MultipleModal","SendNewFiles","value","Object","keys","length","title","uploadDate","format","id"],"sources":["H:/WebSite Project/dr_heinekamp/Front-end/dr_heinekamp/src/Components/Dashboard/Files/Details.js"],"sourcesContent":["import React, { Fragment, useContext, useState, useCallback } from \"react\"\r\nimport Moment from 'moment';\r\nimport { Download, Share, Upload } from \"react-bootstrap-icons\";\r\nimport AuthContext from \"../../../store/auth-context\";\r\nimport ConvasUsers from \"../Users/ConvasUsers\";\r\nimport Modal from \"../Users/Modal\";\r\nimport AddMultipleFiles from \"./AddMultipleFiles\";\r\nimport ListOfSubFiles from \"./ListOfSubFiles\";\r\n\r\nconst Details = props => {\r\n    let details = props.DetailsFile;\r\n    const context = useContext(AuthContext);\r\n    const [openConvas, setOpenConvas] = useState(false);\r\n    const [modal, setModal] = useState(false);\r\n    const [error, setError] = useState();\r\n    const [newSubFiles, setNewSubFiles] = useState([]);\r\n    \r\n    const OffConvasUsersOpen = () => {\r\n        setOpenConvas(!openConvas);\r\n    }\r\n    \r\n\r\n\r\n    const MyDownload = useCallback(async () => {\r\n        try {\r\n            const response = await fetch(\r\n                'https://sharingfileapp2022.azurewebsites.net/api/download/downloadbymyself?userId=' + context.userId + '&file=' + props.DetailsFile.file);\r\n\r\n            if (response.status === 400) {\r\n                throw new Error('There is no file');\r\n            }\r\n            else if (!response.ok) {\r\n                throw new Error('Something went wrong!!!');\r\n            }\r\n            const data = await response.json();\r\n\r\n        }\r\n        catch (error) {\r\n            setError(error.message);\r\n        }\r\n    }, [context.userId, props.DetailsFile.file]);\r\n\r\n    const MultipleModal = () => {\r\n        setModal(!modal);\r\n    }\r\n    const SendNewFiles = (value) =>\r\n    {\r\n        setNewSubFiles(value);\r\n    }\r\n\r\n    return (\r\n        Object.keys(details).length !== 0 ? (\r\n            <Fragment>\r\n                <h3>Details</h3>\r\n                {error && <h5 className=\"text-danger text-center\">{error}</h5>}\r\n                <hr />\r\n                <div className=\"text-center\">\r\n                    <h4 className=\"text-secondary\">{props.DetailsFile.title}</h4>\r\n                    <p className=\"small fw-light\">{Moment(props.DetailsFile.uploadDate).format('dddd - DD MMMM yyyy')}</p>\r\n                </div>\r\n                <hr />\r\n                <div className=\"text-left\">\r\n                    <h5>Main file</h5>\r\n                    <p className=\"small\">You can download main file by click on the Download.</p>\r\n                    <p className=\"small\">If you need to add more files to <b>{props.DetailsFile.title}</b> you can click on upload.</p>\r\n                    <p className=\"small\">Furthermore, you can share this file with all subfiles among the users by clicking on the share.</p>\r\n                    <div className=\"pb-5\">\r\n                        <button className=\"btn btn-success btn-sm shadow rounded-3 mx-1 float-end\" type=\"button\" onClick={MyDownload}>\r\n                            Download <Download className=\"mb-1\" />\r\n                        </button>\r\n                        <button\r\n                            className=\"btn btn-primary btn-sm rounded-circle float-end\" type=\"button\" onClick={OffConvasUsersOpen}>\r\n                            <Share className=\"mb-1\" />\r\n                        </button>\r\n                        <button\r\n                            className=\"btn btn-info btn-sm rounded-circle float-end mx-1\" type=\"button\" onClick={MultipleModal}>\r\n                            <Upload className=\"mb-1 text-light\" />\r\n                        </button>\r\n                        {modal && <Modal title=\"Upload multiple\" onCloseModal={MultipleModal}>\r\n                            <AddMultipleFiles LastFileUploaded={SendNewFiles} fileId={props.DetailsFile.id} fileName={props.DetailsFile.title} />\r\n                        </Modal>}\r\n                        {openConvas && <div id=\"modal\"><ConvasUsers fileId={props.DetailsFile.id} onClose={OffConvasUsersOpen} /></div>}\r\n                    </div>\r\n                    <hr />\r\n                    <div className=\"row\">\r\n                        <ListOfSubFiles showDeleteButton={true} files={newSubFiles} fileId={props.DetailsFile.id} />\r\n                    </div>\r\n                </div>\r\n            </Fragment >\r\n        ) :\r\n            (\r\n                <Fragment>\r\n                    <div className=\"mt-5 mb-5\">\r\n                        {Object.keys(details).length !== 0 ? <h3 className=\"text-danger text-center\">Please select a file from the list.</h3>\r\n                            : <h3 className=\"text-danger text-center\">Please add a file to the list.</h3>}\r\n                    </div>\r\n                </Fragment>\r\n            )\r\n\r\n    )\r\n\r\n}\r\nexport default Details;"],"mappings":"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"},"metadata":{},"sourceType":"module"}